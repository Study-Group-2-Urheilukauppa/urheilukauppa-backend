/*execute SQL statements to this selected database*/
use opisk_n2isri00;

/*remove tables, since we want to always recreate all tables */
drop table if exists Client;
drop table if exists Category;
drop table if exists Product;
drop table if exists Orders;
drop table if exists Orderrow;

/* Client */

CREATE TABLE Client (
clientid INT NOT NULL AUTO_INCREMENT,
clientname CHAR(30) NOT NULL,
postalcode CHAR(10),
clientaddress CHAR(30), 
phonenumber CHAR(20),
PRIMARY KEY (clientid)
) ;

/* CATEGORY */

CREATE TABLE Category (
categoryid INT NOT NULL AUTO_INCREMENT,
categoryname CHAR(20),
PRIMARY KEY (categoryid)
);

/* PRODUCT */

CREATE TABLE Product (
productid INT NOT NULL AUTO_INCREMENT,
productname CHAR(30) NOT NULL,
categoryid INT NOT NULL,
price DECIMAL(5,2),
sale INTEGER(2),
imgURL VARCHAR(255),
PRIMARY KEY (productid),
FOREIGN KEY (categoryid)
    REFERENCES Category (categoryid)
);

ALTER TABLE Product AUTO_INCREMENT=1001;

/* Orders */

CREATE TABLE Orders (
ordernum INT NOT NULL AUTO_INCREMENT,
clientid INT NOT NULL,
orderdate DATETIME NOT NULL,
orderstate CHAR(1),
PRIMARY KEY (ordernum),
FOREIGN KEY (clientid)
    REFERENCES Client (clientid)
); 

/* ORDER ROW */

CREATE TABLE Orderrow (
ordernum INTEGER NOT NULL,
rownum INTEGER NOT NULL,
productid INTEGER NOT NULL,
pcs INTEGER NOT NULL,
PRIMARY KEY (ordernum, rownum),
FOREIGN KEY (productid)
    REFERENCES Product (productid)
);