/*execute SQL statements to this selected database*/
/*use opisk_n2isri00;

/*remove tables, since we want to always recreate all tables */

/*
drop table if exists Client;
drop table if exists Category;
drop table if exists Product;
drop table if exists Orders;
drop table if exists Orderrow;
*/

drop database if exists xxs;

create database xxs;

use xxs;

/* Client */

CREATE TABLE Client (
clientid INT NOT NULL AUTO_INCREMENT,
clientname CHAR(30) NOT NULL,
postalcode CHAR(10),
clientaddress CHAR(30), 
phonenumber CHAR(20),
PRIMARY KEY (clientid)
) ;

/* CATEGORY */

CREATE TABLE Category (
categoryid INT NOT NULL AUTO_INCREMENT,
categoryname CHAR(20),
PRIMARY KEY (categoryid)
);

/* PRODUCT */

CREATE TABLE Product (
productid INT NOT NULL AUTO_INCREMENT,
productname CHAR(30) NOT NULL,
categoryid INT NOT NULL,
price DECIMAL(5,2),
sale INTEGER(2),
imgURL VARCHAR(255),
descript TEXT(1000),
PRIMARY KEY (productid),
FOREIGN KEY (categoryid)
    REFERENCES Category (categoryid)
);

ALTER TABLE Product AUTO_INCREMENT=1001;

/* Orders */

CREATE TABLE Orders (
ordernum INT NOT NULL AUTO_INCREMENT,
clientid INT NOT NULL,
orderdate DATETIME NOT NULL,
orderstate CHAR(1),
PRIMARY KEY (ordernum),
FOREIGN KEY (clientid)
    REFERENCES Client (clientid)
); 

/* ORDER ROW */

CREATE TABLE Orderrow (
ordernum INTEGER NOT NULL,
rownum INTEGER NOT NULL,
productid INTEGER NOT NULL,
pcs INTEGER NOT NULL,
PRIMARY KEY (ordernum, rownum),
FOREIGN KEY (productid)
    REFERENCES Product (productid)
);

insert into category (categoryname) values ("talviurheilu");
insert into category (categoryname) values ("kuntoilu");
insert into category (categoryname) values ("vesiurheilu");
insert into category (categoryname) values ("mailapelit");
insert into category (categoryname) values ("pyöraily");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("sukset","1",20,NULL,"","Hienot sukset");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("käsipaino","2",15,NULL,"","Painava paino");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("juoksumatto","2",99.99,NULL,"","Hyvin rullaa");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("lumilauta","1",215,NULL,"","Temppuiluun soveltuva lumilauta");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("luistimet","1",111,NULL,"","Näillä luistimilla sinusta tulee NHL tähti!");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("maastopyörä","5",459.99,NULL,"","Tällä pyörällä pääset lujjaa mehtässäkin!");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("kuntopyörä","2",209,NULL,"","Kuntopyörä monilla eri säädöillä");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("kahvakuula","2",49.99,NULL,"","Monikäyttöinen paino");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("vesisukset","3",123.45,NULL,"","Näillä voit hiihtää vedessä ja leikkiä Jeesusta!");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("räpylät","3",29,NULL,"","Näillä räpylöillä pääset lujaa vedessä!");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("uimalasit","3",9.50,NULL,"","Nämä mahdollistavat näkemisen vedessäkin");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("snorkkelit","3",19.95,NULL,"","Näillä voit katsella vedenalle samalla, kun hengität");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("sup-lauta","3",49.99,NULL,"","Täydellinen kapistus lämpimään kesäpäivään");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("tennismaila","4",39.98,NULL,"","Tällä mailalla voit olla Jarkko Nieminen");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("pesäpallomaila","4",50,NULL,"","Tämä maila soveltuu harrastamiseen ja itsepuolustukseen");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("golfmaila","4",129.99,NULL,"","Tiger Woodsin suunnittelema maila");
insert into product (productname,categoryid,price,sale,imgURL,descript) values ("kilpapyörä","5",300,NULL,"","Tällä pyörällä voit osallistua Tour de Franceen");
insert into client (clientname,postalcode,clientaddress,phonenumber) values ("Matti","90500","ouluntie1","123456789");
insert into orders (clientid,orderdate,orderstate)VALUES("1","2023-03-24 11:40:01","");